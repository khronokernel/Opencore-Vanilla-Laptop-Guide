
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Fixing iServices Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../misc/credit.html" />
    
    
    <link rel="prev" href="../extras/msr-lock.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    OpenCore Laptop Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installer-guide/opencore-efi.html">
            
                <a href="../installer-guide/opencore-efi.html">
            
                    
                    Creating the USB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../installer-guide/mac-install.html">
            
                <a href="../installer-guide/mac-install.html">
            
                    
                    macOS install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../installer-guide/winblows-install.html">
            
                <a href="../installer-guide/winblows-install.html">
            
                    
                    Windows install
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../ktext.html">
            
                <a href="../ktext.html">
            
                    
                    Gathering files
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Intel Config.plist</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../config.plist/ivy-bridge.html">
            
                <a href="../config.plist/ivy-bridge.html">
            
                    
                    Ivy Bridge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../config.plist/haswell.html">
            
                <a href="../config.plist/haswell.html">
            
                    
                    Haswell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../config.plist/broadwell.html">
            
                <a href="../config.plist/broadwell.html">
            
                    
                    Broadwell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../config.plist/skylake.html">
            
                <a href="../config.plist/skylake.html">
            
                    
                    Skylake
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../config.plist/kaby-lake.html">
            
                <a href="../config.plist/kaby-lake.html">
            
                    
                    Kaby Lake
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../config.plist/coffee-lake-8th-gen.html">
            
                <a href="../config.plist/coffee-lake-8th-gen.html">
            
                    
                    Coffee Lake(8th Gen)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../config.plist/coffee-lake-9th-gen.html">
            
                <a href="../config.plist/coffee-lake-9th-gen.html">
            
                    
                    Coffee Lake(9th Gen)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../config.plist/comet-lake.html">
            
                <a href="../config.plist/comet-lake.html">
            
                    
                    Comet Lake
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Post Install</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="nvram.html">
            
                <a href="nvram.html">
            
                    
                    Emulated NVRAM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="spoof.html">
            
                <a href="spoof.html">
            
                    
                    Disabling GPU
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="security.html">
            
                <a href="security.html">
            
                    
                    Security and FileVault
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Troubleshooting</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../troubleshooting/troubleshooting.html">
            
                <a href="../troubleshooting/troubleshooting.html">
            
                    
                    General Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../troubleshooting/debug.html">
            
                <a href="../troubleshooting/debug.html">
            
                    
                    OpenCore Debugging
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Extras</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../extras/legacy.html">
            
                <a href="../extras/legacy.html">
            
                    
                    Legacy Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../extras/gpu-patches.html">
            
                <a href="../extras/gpu-patches.html">
            
                    
                    GPU Patching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../extras/acpi.html">
            
                <a href="../extras/acpi.html">
            
                    
                    Getting started with ACPI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../troubleshooting/verbose.html">
            
                <a href="../troubleshooting/verbose.html">
            
                    
                    Fixing Resolution and Verbose
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../extras/kalsr-fix.html">
            
                <a href="../extras/kalsr-fix.html">
            
                    
                    Fixing KALSR slide values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="../extras/msr-lock.html">
            
                <a href="../extras/msr-lock.html">
            
                    
                    Fixing CFG Lock
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.7" data-path="iservices.html">
            
                <a href="iservices.html">
            
                    
                    Fixing iServices
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Misc</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../misc/credit.html">
            
                <a href="../misc/credit.html">
            
                    
                    Credit
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Fixing iServices</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="fixing-imessage-and-other-services-with-opencore">Fixing iMessage and other services with OpenCore</h1>
<p>This page is for those having iMessage and other iServices issues, this is a very basic guide so will not go as in-depth into the issues as some other guides. This specific guide is a translation and reinterpretation of the AppleLife Guide on fixing iService: <a href="https://applelife.ru/posts/727913" target="_blank">&#x41A;&#x430;&#x43A; &#x437;&#x430;&#x432;&#x435;&#x441;&#x442;&#x438; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;&#x44B; Apple - iMessage, FaceTime, iCloud</a></p>
<h2 id="generate-a-new-serial">Generate a new Serial</h2>
<p>Download <a href="https://github.com/corpnewt/GenSMBIOS" target="_blank">GenSMBIOS</a> and select option 1 to download MacSerial and next option 3 to generate some new serials. What we&apos;re looking for is a valid serial that currently has no registered purchase date.</p>
<p>Tip: <code>iMacPro1,1 10</code> will print 10 serials, this will save you some time on generating</p>
<p><img src="https://i.imgur.com/cVL7ETT.png" alt=""></p>
<p>Now enter the serial into the <a href="https://checkcoverage.apple.com/" target="_blank">Apple Check Coverage page</a>, you will get 1 of 3 responses:</p>
<p><strong>&quot;We&#x2019;re sorry, but this serial number isn&#x2019;t valid. Please check your information and try again.&quot;:</strong></p>
<p><img src="https://i.imgur.com/dvYcpHB.png" alt=""></p>
<p><strong>Valid Purchase date:</strong></p>
<p><img src="https://i.imgur.com/rh0r28T.png" alt=""></p>
<p><strong>Purchase Date not Validated:</strong></p>
<p><img src="https://i.imgur.com/oSLMqWa.png" alt=""></p>
<p>This last one is what we&apos;re after, as we want something genuine but currently not in use by anyone. Now we can translate the rest of the values into our config.plist -&gt; PlatformInfo -&gt; Add:</p>
<ul>
<li>Type = SystemProductName</li>
<li>Serial = SystemSerialNumber</li>
<li>Board Serial = MLB</li>
<li>SmUUID = SystemUUID</li>
</ul>
<h2 id="fixing-en0">Fixing En0</h2>
<p>To start, grab Hackintool and head to Info -&gt; Misc</p>
<p>Here under Network Interfaces, look for <code>En0</code> under BSD Names and check whether the device has a checkmark under Builtin. If there is a checkmark, skip to Fixing ROM section otherwise continue reading.</p>
<blockquote>
<p>What if I don&apos;t have En0 at all?!?</p>
</blockquote>
<p>Well, we&apos;ll want to reset macOS so it can build the interfaces fresh, open terminal and run the following:</p>
<pre><code class="lang-text">sudo rm /Library/Preferences/SystemConfiguration/NetworkInterfaces.plist
sudo rm /Library/Preferences/SystemConfiguration/preferences.plist
</code></pre>
<p>Once done reboot and check again.</p>
<p>If this doesn&apos;t work, add <a href="https://bitbucket.org/RehabMan/os-x-null-ethernet/downloads/" target="_blank">NullEthernet.kext</a> and <a href="https://github.com/RehabMan/OS-X-Null-Ethernet/blob/master/ssdt-rmne.aml" target="_blank">ssdt-rmne.aml</a> to your EFI and config.plist under Kernel -&gt; Add and ACPI -&gt; Add respectively. The SSDT is precompiled so no extra work needed, reminder compiled files have a .aml extension and .dsl can be seen as source code.</p>
<p><img src="https://i.imgur.com/SPJCQKw.png" alt="Find if set as Built-in"></p>
<p>Now head under the PCI tab of Hackintool and export your PCI DeviceProperties, this will create a pcidevices.plist on your desktop</p>
<p><img src="https://i.imgur.com/VAjPfol.png" alt="Export PCI address"></p>
<p>Now search through the pcidevices.plist and find the PCIRoot of your ethernet controller. For us, this would be <code>PciRoot(0x0)/Pci(0x1f,0x6)</code></p>
<p><img src="https://i.imgur.com/1aTlAC6.png" alt="Copy PCIRoot"></p>
<p>Now with the PCIRoot, go into your config.plist -&gt; DeviceProperties -&gt; Add and apply the property of <code>built-in</code> with type <code>Data</code> and value <code>01</code></p>
<p><img src="https://i.imgur.com/vGwow2X.png" alt="Add to config.plist"></p>
<h2 id="fixing-rom">Fixing ROM</h2>
<p>This is a section many may have forgotten about but this is found in your config.plist under PlatformInfo -&gt; generic -&gt; ROM</p>
<p>To find your actual MAC Address/ROM value, you can find in a couple places:</p>
<ul>
<li>BIOS</li>
<li>macOS: System Preferences -&gt; Network -&gt; Ethernet -&gt; Advanced -&gt; MAC Address</li>
<li>Windows: Settings -&gt; Network &amp; Internet -&gt; Ethernet -&gt; Ethernet -&gt; Phyisical MAC Address</li>
</ul>
<p>Some users have even gone as far as using real Apple MAC Address dumps for their config, for this guide we&apos;ll be  using our real MAC Address but note that this is another option</p>
<p>When adding this to your config, <code>c0:7e:bf:c3:af:ff</code> should be converted to <code>c07ebfc3afff</code> as the <code>Data</code> type cannot accept colons(<code>:</code>).</p>
<p><img src="https://i.imgur.com/vAW6Rkz.png" alt=""></p>
<h2 id="verifying-nvram">Verifying NVRAM</h2>
<p>Something that many forget about iServices is that NVRAM is curtial to getting it working correcttly, the reason being is that iMessage keys and such are stored in NVRAM. Without NVRAM, iMessage can neither see nor store keys.</p>
<p>So we&apos;ll need to verify NVRAM works, regardless if &quot;it should work&quot; as some firmwares can be more of a pain than others.</p>
<p>Please refer to the <a href="nvram.html">Emulated NVRAM</a> section of the OpenCore Guide for both testing if you have working NVRAM and emulating it if you dont.</p>
<h2 id="clean-out-old-attempts">Clean out old attempts</h2>
<p>This is important for those who&apos;ve tried setting up iMessage but failed, to start make sure your NVRAM has been cleared. You can enable the option in the boot picker in your config under config.plist -&gt; Misc -&gt; Security -&gt; AllowNvramReset.</p>
<p>Next open terminal and run the following:</p>
<pre><code class="lang-text">sudo rm -rf ~/Library/Caches/com.apple.iCloudHelper* \
            ~/Library/Caches/com.apple.Messages* \
            ~/Library/Caches/com.apple.imfoundation.IMRemoteURLConnectionAgent* \
            ~/Library/Preferences/com.apple.iChat* \
            ~/Library/Preferences/com.apple.icloud* \
            ~/Library/Preferences/com.apple.imagent* \
            ~/Library/Preferences/com.apple.imessage* \
            ~/Library/Preferences/com.apple.imservice* \
            ~/Library/Preferences/com.apple.ids.service* \
            ~/Library/Preferences/com.apple.madrid.plist* \
            ~/Library/Preferences/com.apple.imessage.bag.plist* \
            ~/Library/Preferences/com.apple.identityserviced* \
            ~/Library/Preferences/com.apple.ids.service* \
            ~/Library/Preferences/com.apple.security* \
            ~/Library/Messages
</code></pre>
<h2 id="verifying-your-work-one-last-time">Verifying your work one last time</h2>
<p>Grab <a href="https://github.com/acidanthera/MacInfoPkg/releases" target="_blank">macserial</a> and run the following:</p>
<pre><code class="lang-text">path/to/macserial -s
</code></pre>
<p>This will provide us with a full rundown of our system, verify that what is presented matches up with your work.</p>
<h2 id="cleaning-up-your-appleid">Cleaning up your AppleID</h2>
<ul>
<li>Remove all devices from your AppleID: <a href="https://appleid.apple.com/account/manage" target="_blank">Manage your devices</a></li>
<li>Enable 2 Factor-Auth</li>
<li>Remove all iServices from Keychain, some examples:<pre><code class="lang-text">ids: identity-rsa-key-pair-signature-v1
ids: identity-rsa-private-key
ids: identity-rsa-public-key
ids: message-protection-key
ids: message-protection-public-data-registered
ids: personal-public-key-cache
iMessage Encryption Key
iMessage Signing Key
com.apple.facetime: registrationV1
etc ...
</code></pre>
</li>
</ul>
<p>And a final layer of precaution is to make a new AppleID to play with, this makes sure that if you do end up blacklisting your account that it&apos;s not your main.</p>
<p>An extra tip is adding a payment card to the account, some users found this also helped with iMessage activation.</p>
<h2 id="customer-code-error">Customer Code error</h2>
<p>Welp mate, you&apos;ve done it. You blackmailed your AppleID. The fix is simple but not pretty, <strong>you MUST call Apple</strong>. Otherwise, there is no proceeding besides using a new account. Adding a payment card before calling can help legitimise the account so it doesn&apos;t seem as much like a bot.</p>
<p><img src="https://i.imgur.com/ypDy99L.png" alt=""></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../extras/msr-lock.html" class="navigation navigation-prev " aria-label="Previous page: Fixing CFG Lock">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../misc/credit.html" class="navigation navigation-next " aria-label="Next page: Credit">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Fixing iServices","level":"5.7","depth":1,"next":{"title":"Credit","level":"6.1","depth":1,"path":"misc/credit.md","ref":"misc/credit.md","articles":[]},"previous":{"title":"Fixing CFG Lock","level":"5.6","depth":1,"path":"extras/msr-lock.md","ref":"extras/msr-lock.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-default","-lunr","-search","search-plus","addcssjs","favicon-plus"],"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"output":"_book","addcssjs":{"css":[],"js":[]},"fontsettings":{"theme":"night","family":"sans","size":2},"favicon-plus":{"appleTouchIconPrecomposed152":"","favicon":"","output":"_book"},"highlight":{},"favicon":"/icons/favicon.ico","appleTouchIconPrecomposed152":"/icons/appleTouchIconPrecomposed152.png","sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":[]},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"search-plus":{}},"theme":"default","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"links":{"sharing":{"google":false,"facebook":false,"twitter":false,"weibo":false,"all":false}},"gitbook":"*"},"file":{"path":"post-install/iservices.md","mtime":"2020-02-02T04:52:58.520Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-02-02T04:53:45.235Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    

    </body>
</html>

